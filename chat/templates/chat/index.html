{% extends "base.html" %}
{% load static %}

{% block title %}Join Chat Room | MyChat{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock %}

{% block content %}
<div class="chat-container">
  <h1>Join a Chat Room</h1>

  <input id="username-input" type="text" placeholder="Enter your name..." /><br><br>
  <input id="room-name-input" type="text" placeholder="Enter room name..." /><br><br>
  <input id="room-name-submit" type="button" value="Enter Room" />

  <div class="footer">Made with ❤️ by Alok</div>
</div>

<script>
  document.querySelector('#username-input').focus();

  document.querySelector('#room-name-input').addEventListener('keyup', function (e) {
    if (e.key === 'Enter') {
      document.querySelector('#room-name-submit').click();
    }
  });

  document.querySelector('#room-name-submit').onclick = function () {
    const username = document.querySelector('#username-input').value.trim();
    const roomName = document.querySelector('#room-name-input').value.trim();

    if (username && roomName) {
      localStorage.setItem('chat_username', username);
      window.location.pathname = '/chat/' + encodeURIComponent(roomName) + '/';
    } else {
      alert('Please enter both name and room name.');
    }
  };
</script>
{% endblock %}
